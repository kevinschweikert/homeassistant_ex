# Homex

```elixir
Mix.install([
  {:homex, path: __DIR__},
  {:kino, "~> 0.16.0"}
  ], config: [
  homex: [
    device: [name: "my device", identifiers: ["foo"]]
  ]
])
```

## Section

```elixir
defmodule MySwitch do
  use Homex.Entity.Switch, name: "my-switch"

  def handle_on(state) do
    IO.puts "Switch turned on"
    {:noreply, state}
  end

    def handle_off(state) do
    IO.puts "Switch turned off"
    {:noreply, state}
  end

  def handle_update(state) do
    {:reply, Enum.random(["ON", "OFF"]), state}
  end
end
```

```elixir
Logger.put_application_level(:emqtt, :info)
```

```elixir
{:ok, pid} = Homex.start_link([entities: [MySwitch]])
```

```elixir
measurement = "OFF"
Homex.publish(MySwitch.command_topic(), measurement)
```

```elixir
measurement = "ON"
Homex.publish(MySwitch.command_topic(), measurement)
```
